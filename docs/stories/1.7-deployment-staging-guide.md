# Guide de Déploiement Staging - Story 1.7

## Objectif
Mettre à jour l'environnement staging (devrecyclic.jarvos.eu) avec les changements de renommage "Recyclic" → "RecyClique" (frontend uniquement).

## Prérequis
- Accès SSH au serveur staging
- Docker et Docker Compose installés
- Fichier `.env.staging` configuré sur le serveur

## Étapes de Déploiement

### 1. Se connecter au serveur staging
```bash
ssh user@devrecyclic.jarvos.eu
cd /path/to/recyclic
```

### 2. Vérifier l'état actuel
```bash
# Vérifier les services en cours
docker compose -p recyclic-staging -f docker-compose.staging.yml ps

# Vérifier les images actuelles
docker images | grep recyclic
```

### 3. Récupérer les dernières modifications
```bash
# Depuis le dépôt Git
git pull origin main  # ou la branche appropriée

# Vérifier les changements
git log --oneline -5
```

### 4. Rebuilder l'image frontend
```bash
# Rebuilder uniquement le frontend (les changements sont dans le frontend)
docker compose -p recyclic-staging -f docker-compose.staging.yml build frontend

# Vérifier que l'image est bien créée
docker images | grep recyclic-frontend-staging
```

### 5. Redémarrer le service frontend
```bash
# Redémarrer le service frontend avec la nouvelle image
docker compose -p recyclic-staging -f docker-compose.staging.yml up -d --no-deps frontend

# Vérifier que le service démarre correctement
docker compose -p recyclic-staging -f docker-compose.staging.yml ps frontend
docker compose -p recyclic-staging -f docker-compose.staging.yml logs -f frontend
```

### 6. Vérifier les changements
```bash
# Vérifier que le service répond
curl -I https://devrecyclic.jarvos.eu

# Vérifier les logs pour d'éventuelles erreurs
docker compose -p recyclic-staging -f docker-compose.staging.yml logs frontend --tail=50
```

### 7. Tests de validation
1. Ouvrir https://devrecyclic.jarvos.eu dans un navigateur
2. Vider le cache du navigateur (Ctrl+Shift+Delete)
3. Vérifier :
   - ✅ Le titre de l'onglet affiche "RecyClique" (pas "Recyclic - Recyclage Intelligent")
   - ✅ Les textes dans l'interface affichent "RecyClique"
   - ✅ La catchphrase affiche "Plateforme de gestion pour ressourceries"
   - ✅ Les emails et notifications bot affichent "RecyClique"

### 8. Rollback (si nécessaire)
Si quelque chose ne fonctionne pas :
```bash
# Arrêter le service frontend
docker compose -p recyclic-staging -f docker-compose.staging.yml stop frontend

# Utiliser l'ancienne image (si disponible)
docker compose -p recyclic-staging -f docker-compose.staging.yml up -d --no-deps frontend
```

## Notes Importantes

⚠️ **Aucune migration de base de données nécessaire** - Les changements sont uniquement dans le frontend (textes UI).

⚠️ **Les URLs restent inchangées** - devrecyclic.jarvos.eu reste valide.

⚠️ **Le backend n'a pas changé** - Seuls les textes user-facing ont été modifiés.

## Commandes Rapides (Résumé)

```bash
# Tout en une fois
cd /path/to/recyclic
git pull
docker compose -p recyclic-staging -f docker-compose.staging.yml build frontend
docker compose -p recyclic-staging -f docker-compose.staging.yml up -d --no-deps frontend
docker compose -p recyclic-staging -f docker-compose.staging.yml logs -f frontend
```

## Vérification Post-Déploiement

- [ ] Titre onglet navigateur : "RecyClique"
- [ ] Textes UI : "RecyClique" partout
- [ ] Catchphrase : "Plateforme de gestion pour ressourceries"
- [ ] Pas d'erreurs dans les logs
- [ ] Service frontend en état "Up"

